{% extends "tartan_eats/base.html" %} 
  {% load static %} 
  {% block css %}  
	<!-- Animate css -->
	<link rel="stylesheet" href="{% static 'plugins/animate/animate.css' %}">
	<!-- Slick Carousel -->
	<!-- <link rel="stylesheet" href="static/css/slick.css"> -->
	<link rel="stylesheet" href="{% static 'plugins/slick/slick.css' %}">
	<link rel="stylesheet" href="{% static 'plugins/slick/slick-theme.css' %}">

  {% endblock %}

{% block navbar %} 
	<li>
	<a href="{% url 'customer-home' %}">Home</a>
	</li>
	<!-- / Home -->
	<!-- My Orders -->
	<li>
	<a href="{% url 'customer-history-order' %}">My Orders</a>
	</li>
	<!-- / My Orders -->
	<!-- My Account -->
	<li>
	<a href="{% url 'customer-account' %}">My Account</a>
	</li>
{% endblock %}

<!-- cart dropdown box in section top-header -->
{% block cart %}
	<div class="col-md-4 col-xs-12 col-sm-4">
		<!-- Cart -->
		<ul class="top-menu text-right list-inline">
			<li class="dropdown cart-nav dropdown-slide">
				<a href="#!" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"><i
						class="tf-ion-android-cart"></i>Cart</a>
				<div class="dropdown-menu cart-dropdown">
					<ol id="cart-list">
						<!-- Cart Item -->
						{% comment %} <div> {{order_cuisine[0].cuisine.cuisine_name}} dd	</div> {% endcomment %}
						{% comment %} {% for one_cuisine_in_cart in all_cuisine_in_cart %}
							<div class="media">
								<a class="pull-left" href="#!">
									{% if not one_cuisine_in_cart.cuisine.cuisine_picture %}
										<img class="media-object" src="{% static 'images/shop/cart/cart-2.jpg' %}" alt="image" />
									{% else %}
										<img class="media-object" src="{% url 'res-photo' one_cuisine_in_cart.cuisine.id "cuisine" %}" alt="image" />
									{% endif %}
								</a>
								<div class="media-body">
									<h4 class="media-heading"><a href="#!">{{one_cuisine_in_cart.cuisine.cuisine_name}}</a></h4>
									<div class="cart-price">
										<span>{{one_cuisine_in_cart.item_quantity}} x</span>
										<span>$ {{one_cuisine_in_cart.cuisine.price}}</span>
									</div>
								</div>
								<!--remove item button-->
								<form class="remove"
									action="{% url 'delete-from-cart' one_cuisine_in_cart.cuisine.id %}"
									method="POST">
									<input type="submit" value="X">
									{% csrf_token %}
								</form>
							</div>
						{% endfor %} {% endcomment %}
						<!-- / Cart Item -->
					</ol>
					<!-- Cart Summary -->
					<div class="cart-summary" id = "cart-subtotal">
						{% comment %} <span>Total</span>
						<span class="total-price">${{order.subtotal}}</span> {% endcomment %}
					</div>

					<ul class="text-center cart-buttons" id="checkout-banner">
						{% comment %} {% if order %}
							<li><a href="{% url 'customer-checkout' order.id %}" class="btn btn-small btn-solid-border">Checkout</a></li>
						{% else %}
							<li><a href="{% url 'customer-single-restaurant' restaurant.user.id %}" class="btn btn-small btn-solid-border">Checkout</a></li>
						{% endif %} {% endcomment %}
					</ul> <!-- / Cart Summary -->
				</div>

			</li><!-- / Cart -->
		</ul><!-- / .nav .navbar-nav .navbar-right -->
	</div>
{% endblock %}


{% block pagename %}
	<section class="page-header">
	<div class="container">
		<div class="row">
		<div class="col-md-12">
			<div class="content">
			<h1 class="page-name">{{ restaurant.restaurant_name}}</h1>
			</div>
		</div>
		</div>
	</div>
	</section>
{% endblock %}

{% block content %}
<section class="products section">
		<div class="container">
			<div class="row">
				{% for cuisine in cuisines %}
					<div class="col-md-4">
					<div class="product-item">
						<div class="product-thumb">
						{% if not cuisine.cuisine_picture %}
							<img class="img-responsive" src="{% static 'images/res-profile-default.png' %}" alt="product-img" />
						{% else %}
							<img class="media-object" src="{% url 'res-photo' cuisine.id "cuisine" %}" alt="image" />
						{% endif %}
						<div class="preview-meta">
							<ul>
							<li >
								 {% comment %} <form action="{% url 'add-to-cart' cuisine.id %}"> {% endcomment %}
									<button id="id_add_cart_{{cuisine.id}}" onclick="addItem({{cuisine.id}})"><i class="tf-ion-android-cart"></i></button>        
									{% comment %} {% csrf_token%} {% endcomment %}
								{% comment %} </form> {% endcomment %}
								{% comment %} <a href="#!"><i class="tf-ion-android-cart"></i></a> {% endcomment %}
							</li>
							</ul>
						</div>
						</div>
						<div class="product-content">
						<h4>{{ cuisine.cuisine_name }}</h4>
						<p class="price">{{ cuisine.cuisine_description }}</p>
						<p class="price">$ {{ cuisine.price }}</p>
						</div>
					</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</section>
{% endblock %}

{% block scripts %}

	<!--
	Essential Scripts
	=====================================-->
	<script src="{% static 'plugins/jquery/dist/jquery.min.js' %}" ></script>

	<!-- Bootstrap 3.1 -->
	<script src="{% static 'plugins/bootstrap/js/bootstrap.min.js' %}" ></script>

	<!-- Bootstrap Touchpin -->
	<script src="{% static 'plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js' %}" ></script>

	<!-- Count Down Js -->
	<script src="{% static 'plugins/syo-timer/build/jquery.syotimer.min.js' %}" ></script>

	<!-- Main Js File -->
	<!-- <script src="static/js/script.js"></script> -->
	<script src="{% static 'js/script.js' %}" ></script>

	<!-- script of AJAX -->
	<script src="{% static 'tartan_eats/cart.js' %}" type="text/javascript"></script>

	<script>
		// Save this user's username so our JS deleteItem() function can determine
		// whether show delete buttons
		// If you wish to use the template language's URL reverse function, you can
		// do it here in the HTML file, but not in the JS file

		var getAddItemURL = function (cuisineId) {
        	return "{% url 'add-to-cart' 0 %}".replace("0",cuisineId)
    	}
		var getDeleteItemURL = function (cuisineId) {
        	return "{% url 'delete-from-cart' 0 %}".replace("0",cuisineId)
    	}

		var getSingleResURL = function (restaurant_id) {
        	return "{% url 'customer-single-restaurant' 0 %}".replace("0",restaurant_id)
    	}

		var getCheckoutURL = function (orderId) {
            return "{% url 'customer-checkout' 0 %}".replace("0",orderId)
        }

		// Call getList() as soon as page is finished loading to display the todolist
		var restaurant_id = "{{restaurant.user.id}}"
 		window.onload = getList;

		var redirectToLogin = function () {
			window.location.href = "{% url 'login' %}"
		}

		// ... also call getList every 5 seconds hereafter to update the list
		window.setInterval(getList, 15000);
	</script>
{% endblock %}